<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>💐 Offline Bouquet Booth</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
  body { font-family: sans-serif; text-align: center; padding: 20px; background: #fff0f5; }
  h1 { color: #d63384; }
  .card { background: white; padding: 20px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); max-width: 420px; margin: 20px auto; }
  input, textarea, button, select { width: 90%; padding: 10px; margin: 8px 0; border-radius: 12px; border: 1px solid #ccc; }
  button { background: #ff85b3; color: white; border: none; cursor: pointer; font-weight: bold; }
  button:hover { background: #ff6399; }
  #qr { margin-top: 15px; }
</style>
</head>
<body>
<h1>🌸 Love Bouquet Booth 🌸</h1>

<div id="create" class="card">
  <input id="receiver" placeholder="Recipient's Name 💌">
  <textarea id="message" placeholder="Your Message ✨"></textarea>
  <select id="flower">
    <option value="🌹 Rose">🌹 Rose</option>
    <option value="🌻 Sunflower">🌻 Sunflower</option>
    <option value="🌷 Tulip">🌷 Tulip</option>
    <option value="🌼 Daisy">🌼 Daisy</option>
    <option value="🌸 Cherry Blossom">🌸 Cherry Blossom</option>
    <option value="🌺 Hibiscus">🌺 Hibiscus</option>
    <option value="💜 Lavender">💜 Lavender</option>
    <option value="🤍 Lily">🤍 Lily</option>
  </select>
  <button onclick="makeLink()">💌 Generate Bouquet Link + QR</button>
  <div id="link"></div>
  <div id="qr"></div>
</div>

<div id="view" class="card" style="display:none;">
  <h2>💌 Bouquet for <span id="viewName"></span></h2>
  <div style="font-size:3rem" id="viewFlower"></div>
  <p id="viewMsg"></p>
</div>

<script>
function makeLink(){
  const receiver = document.getElementById("receiver").value.trim() || "Recipient";
  const message = document.getElementById("message").value.trim() || "(No message)";
  const flower = document.getElementById("flower").value;
  
  const payload = encodeURIComponent(JSON.stringify({receiver, message, flower}));
  const url = window.location.origin + window.location.pathname + "?data=" + payload;
  
  document.getElementById("link").innerHTML =
    `<p>Share this link:</p><a href="${url}" target="_blank">${url}</a>`;
  
  document.getElementById("qr").innerHTML = "";
  new QRCode(document.getElementById("qr"), { text: url, width: 220, height: 220 });
}

// when opening with ?data=..., show bouquet view
(function(){
  const params = new URLSearchParams(window.location.search);
  if(params.has("data")){
    try {
      const obj = JSON.parse(decodeURIComponent(params.get("data")));
      document.getElementById("create").style.display = "none";
      document.getElementById("view").style.display = "block";
      document.getElementById("viewName").innerText = obj.receiver;
      document.getElementById("viewFlower").innerText = obj.flower.split(" ")[0];
      document.getElementById("viewMsg").innerText = obj.message;
    } catch(e) { console.error("Invalid bouquet data"); }
  }
})();
</script>
</body>
</html>
